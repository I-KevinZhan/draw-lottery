# 美团DDD实践 示例项目

-----------------------------

# 说明
* 基于美团DDD实践文章构建的项目
https://tech.meituan.com/DDD%20in%20practice.html

# 需求
* 抽奖活动有活动限制，例如用户的抽奖次数限制，抽奖的开始和结束的时间等；
* 一个抽奖活动包含多个奖品，可以针对一个或多个用户群体；
* 奖品有自身的奖品配置，例如库存量，被抽中的概率等，最多被一个用户抽中的次数等等；
* 用户群体有多种区别方式，如按照用户所在城市区分，按照新老客区分等；
* 活动具有风控配置，能够限制用户参与抽奖的频率。

# 设计
整体需求划分为 M端-抽奖管理 和C端-用户抽奖两个子领域，针对用户抽奖领域设计

## 限界上下文
* 划分为：抽奖、活动准入、风控、计数、库存 上下文

## 上下文映射
* 梳理上下文关系

## 战术建模
* 实体entity 值对象 value object 聚合根 aggregate 领域服务 领域事件

# 工程实现
 
## 模块划分
* 按项目模块或包来划分
* lottery 抽奖 risk control 风险控制 counter 计数上下文 condition 准入上下文 stock 库存上下文
* 模块内组织：domain.entity 实体 domain.valobj 值对象 service 领域服务 repo 资源库 facade 防腐层


## 领域对象
* DrawLottery 抽奖业务-匹配奖池 AwardPool 奖池匹配具体逻辑

## 资源库
* DAO 数据访问对象 PO 持久化对象 Cache 缓存对象 Repository 整合资源库访问和存储逻辑
 
## 防腐层
* 适配层，对外部上下文访问时进行转换处理

## 领域服务
* 使用提供的领域模型对象、资源库、防腐层 提供对其它上下文的接口
* 通过微服务架构部署领域服务

## 应用服务层
* 连接前端和领域服务实现，完成功能，对外属于领域服务 对内属于应用服务